<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">IR.Types.Typechecking</span><span>
</span><span id="line-3"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="IR.Types.Typechecking.html#typecheckProgram"><span class="hs-identifier">typecheckProgram</span></a></span><span>
</span><span id="line-4"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="IR.IR.html"><span class="hs-identifier">IR.IR</span></a></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="IR.Types.Inference.html"><span class="hs-identifier">IR.Types.Inference</span></a></span><span>             </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="IR.Types.Inference.html#inferProgram"><span class="hs-identifier">inferProgram</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="IR.Types.Type.html"><span class="hs-identifier">IR.Types.Type</span></a></span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Common.Compiler.html"><span class="hs-identifier">Common.Compiler</span></a></span><span>               </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Compiler</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span>                 </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Bifunctor</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="annot"><a href="IR.Types.Typechecking.html#typecheckProgram"><span class="hs-identifier hs-type">typecheckProgram</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="IR.IR.html#Program"><span class="hs-identifier hs-type">Program</span></a></span><span> </span><span class="annot"><a href="IR.Types.Type.html#Annotations"><span class="hs-identifier hs-type">Annotations</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Common.Compiler.html#Pass"><span class="hs-identifier hs-type">Compiler.Pass</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="IR.IR.html#Program"><span class="hs-identifier hs-type">Program</span></a></span><span> </span><span class="annot"><a href="IR.Types.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span id="typecheckProgram"><span class="annot"><span class="annottext">typecheckProgram :: Program Annotations -&gt; Pass (Program Type)
</span><a href="IR.Types.Typechecking.html#typecheckProgram"><span class="hs-identifier hs-var hs-var">typecheckProgram</span></a></span></span><span> </span><span id="local-6989586621679519209"><span class="annot"><span class="annottext">Program Annotations
</span><a href="#local-6989586621679519209"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><span class="annottext">[(TConId, TypeDef)] -&gt; Pass ()
</span><a href="IR.Types.Typechecking.html#checkTypeDefs"><span class="hs-identifier hs-var">checkTypeDefs</span></a></span><span> </span><span class="annot"><span class="annottext">([(TConId, TypeDef)] -&gt; Pass ()) -&gt; [(TConId, TypeDef)] -&gt; Pass ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Program Annotations -&gt; [(TConId, TypeDef)]
forall t. Program t -&gt; [(TConId, TypeDef)]
</span><a href="IR.IR.html#typeDefs"><span class="hs-identifier hs-var hs-var">typeDefs</span></a></span><span> </span><span class="annot"><span class="annottext">Program Annotations
</span><a href="#local-6989586621679519209"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-16"></span><span>  </span><span id="local-6989586621679519206"><span class="annot"><span class="annottext">[(VarId, Expr [Type])]
</span><a href="#local-6989586621679519206"><span class="hs-identifier hs-var">defs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(VarId, Expr [Annotation])] -&gt; Pass [(VarId, Expr [Type])]
forall a. [(a, Expr [Annotation])] -&gt; Pass [(a, Expr [Type])]
</span><a href="#local-6989586621679519205"><span class="hs-identifier hs-var">unravelAnns</span></a></span><span> </span><span class="annot"><span class="annottext">([(VarId, Expr [Annotation])] -&gt; Pass [(VarId, Expr [Type])])
-&gt; [(VarId, Expr [Annotation])] -&gt; Pass [(VarId, Expr [Type])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(VarId, Expr Annotations)] -&gt; [(VarId, Expr [Annotation])]
forall a. [(a, Expr Annotations)] -&gt; [(a, Expr [Annotation])]
</span><a href="#local-6989586621679519204"><span class="hs-identifier hs-var">unwrapAnns</span></a></span><span> </span><span class="annot"><span class="annottext">([(VarId, Expr Annotations)] -&gt; [(VarId, Expr [Annotation])])
-&gt; [(VarId, Expr Annotations)] -&gt; [(VarId, Expr [Annotation])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Program Annotations -&gt; [(VarId, Expr Annotations)]
forall t. Program t -&gt; [(VarId, Expr t)]
</span><a href="IR.IR.html#programDefs"><span class="hs-identifier hs-var hs-var">programDefs</span></a></span><span> </span><span class="annot"><span class="annottext">Program Annotations
</span><a href="#local-6989586621679519209"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><span class="annottext">Program [Type] -&gt; Pass (Program Type)
</span><a href="IR.Types.Inference.html#inferProgram"><span class="hs-identifier hs-var">inferProgram</span></a></span><span> </span><span class="annot"><span class="annottext">(Program [Type] -&gt; Pass (Program Type))
-&gt; Program [Type] -&gt; Pass (Program Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Program Annotations
</span><a href="#local-6989586621679519209"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">programDefs :: [(VarId, Expr [Type])]
</span><a href="IR.IR.html#programDefs"><span class="hs-identifier hs-var">programDefs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(VarId, Expr [Type])]
</span><a href="#local-6989586621679519206"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-18"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-comment">-- | Unwrap each 'Annotations' into a bare 'Annotation' list.</span><span>
</span><span id="line-20"></span><span>  </span><span id="local-6989586621679519242"><span class="annot"><a href="#local-6989586621679519204"><span class="hs-identifier hs-type">unwrapAnns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679519242"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="IR.IR.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="IR.Types.Type.html#Annotations"><span class="hs-identifier hs-type">Annotations</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679519242"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="IR.IR.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="IR.Types.Type.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-21"></span><span>  </span><span id="local-6989586621679519204"><span class="annot"><span class="annottext">unwrapAnns :: [(a, Expr Annotations)] -&gt; [(a, Expr [Annotation])]
</span><a href="#local-6989586621679519204"><span class="hs-identifier hs-var hs-var">unwrapAnns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((a, Expr Annotations) -&gt; (a, Expr [Annotation]))
-&gt; [(a, Expr Annotations)] -&gt; [(a, Expr [Annotation])]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(((a, Expr Annotations) -&gt; (a, Expr [Annotation]))
 -&gt; [(a, Expr Annotations)] -&gt; [(a, Expr [Annotation])])
-&gt; ((a, Expr Annotations) -&gt; (a, Expr [Annotation]))
-&gt; [(a, Expr Annotations)]
-&gt; [(a, Expr [Annotation])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Expr Annotations -&gt; Expr [Annotation])
-&gt; (a, Expr Annotations) -&gt; (a, Expr [Annotation])
forall (p :: * -&gt; * -&gt; *) b c a.
Bifunctor p =&gt;
(b -&gt; c) -&gt; p a b -&gt; p a c
</span><span class="hs-identifier hs-var">second</span></span><span> </span><span class="annot"><span class="annottext">((Expr Annotations -&gt; Expr [Annotation])
 -&gt; (a, Expr Annotations) -&gt; (a, Expr [Annotation]))
-&gt; (Expr Annotations -&gt; Expr [Annotation])
-&gt; (a, Expr Annotations)
-&gt; (a, Expr [Annotation])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Annotations -&gt; [Annotation])
-&gt; Expr Annotations -&gt; Expr [Annotation]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Annotations -&gt; [Annotation]
</span><a href="IR.Types.Type.html#unAnnotations"><span class="hs-identifier hs-var">unAnnotations</span></a></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-comment">-- | Unravel each 'Annotation' in the list into a 'Type'.</span><span>
</span><span id="line-24"></span><span>  </span><span id="local-6989586621679519243"><span class="annot"><a href="#local-6989586621679519205"><span class="hs-identifier hs-type">unravelAnns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679519243"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="IR.IR.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="IR.Types.Type.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Common.Compiler.html#Pass"><span class="hs-identifier hs-type">Compiler.Pass</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679519243"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="IR.IR.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="IR.Types.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-25"></span><span>  </span><span id="local-6989586621679519205"><span class="annot"><span class="annottext">unravelAnns :: [(a, Expr [Annotation])] -&gt; Pass [(a, Expr [Type])]
</span><a href="#local-6989586621679519205"><span class="hs-identifier hs-var hs-var">unravelAnns</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(a, Expr [Annotation])] -&gt; ([a], [Expr [Annotation]])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">unzip</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679519199"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679519199"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679519198"><span class="annot"><span class="annottext">[Expr [Annotation]]
</span><a href="#local-6989586621679519198"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-comment">-- TODO: add more context to support annotations deep inside patterns</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><span class="annottext">[a] -&gt; [Expr [Type]] -&gt; [(a, Expr [Type])]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679519199"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">([Expr [Type]] -&gt; [(a, Expr [Type])])
-&gt; Pass [Expr [Type]] -&gt; Pass [(a, Expr [Type])]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Expr [Annotation] -&gt; Pass (Expr [Type]))
-&gt; [Expr [Annotation]] -&gt; Pass [Expr [Type]]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([Annotation] -&gt; Pass [Type])
-&gt; Expr [Annotation] -&gt; Pass (Expr [Type])
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">(([Annotation] -&gt; Pass [Type])
 -&gt; Expr [Annotation] -&gt; Pass (Expr [Type]))
-&gt; ([Annotation] -&gt; Pass [Type])
-&gt; Expr [Annotation]
-&gt; Pass (Expr [Type])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Annotation -&gt; Pass Type) -&gt; [Annotation] -&gt; Pass [Type]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Annotation -&gt; Pass Type
</span><a href="IR.Types.Typechecking.html#unravelAnnotation"><span class="hs-identifier hs-var">unravelAnnotation</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Expr [Annotation]]
</span><a href="#local-6989586621679519198"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="annot"><a href="IR.Types.Typechecking.html#unravelAnnotation"><span class="hs-identifier hs-type">unravelAnnotation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="IR.Types.Type.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Common.Compiler.html#Pass"><span class="hs-identifier hs-type">Compiler.Pass</span></a></span><span> </span><span class="annot"><a href="IR.Types.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-30"></span><span id="unravelAnnotation"><span class="annot"><span class="annottext">unravelAnnotation :: Annotation -&gt; Pass Type
</span><a href="IR.Types.Typechecking.html#unravelAnnotation"><span class="hs-identifier hs-var hs-var">unravelAnnotation</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="IR.Types.Type.html#AnnType"><span class="hs-identifier hs-type">AnnType</span></a></span><span> </span><span id="local-6989586621679519193"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679519193"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Pass Type
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679519193"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-31"></span><span class="annot"><a href="IR.Types.Typechecking.html#unravelAnnotation"><span class="hs-identifier hs-var">unravelAnnotation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="IR.Types.Type.html#AnnArrows"><span class="hs-identifier hs-type">AnnArrows</span></a></span><span> </span><span id="local-6989586621679519191"><span class="annot"><span class="annottext">[Annotation]
</span><a href="#local-6989586621679519191"><span class="hs-identifier hs-var">ats</span></a></span></span><span> </span><span id="local-6989586621679519190"><span class="annot"><span class="annottext">Annotation
</span><a href="#local-6989586621679519190"><span class="hs-identifier hs-var">rt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-32"></span><span>  </span><span id="local-6989586621679519189"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679519189"><span class="hs-identifier hs-var">ats'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Annotation -&gt; Pass Type) -&gt; [Annotation] -&gt; Pass [Type]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Annotation -&gt; Pass Type
</span><a href="IR.Types.Typechecking.html#unravelAnnotation"><span class="hs-identifier hs-var">unravelAnnotation</span></a></span><span> </span><span class="annot"><span class="annottext">[Annotation]
</span><a href="#local-6989586621679519191"><span class="hs-identifier hs-var">ats</span></a></span><span>
</span><span id="line-33"></span><span>  </span><span id="local-6989586621679519188"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679519188"><span class="hs-identifier hs-var">rt'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Annotation -&gt; Pass Type
</span><a href="IR.Types.Typechecking.html#unravelAnnotation"><span class="hs-identifier hs-var">unravelAnnotation</span></a></span><span> </span><span class="annot"><span class="annottext">Annotation
</span><a href="#local-6989586621679519190"><span class="hs-identifier hs-var">rt</span></a></span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><span class="annottext">Type -&gt; Pass Type
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Pass Type) -&gt; Type -&gt; Pass Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">([Type], Type) -&gt; Type
</span><a href="IR.Types.Type.html#foldArrow"><span class="hs-identifier hs-var">foldArrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679519189"><span class="hs-identifier hs-var">ats'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679519188"><span class="hs-identifier hs-var">rt'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="annot"><a href="IR.Types.Typechecking.html#unravelAnnotation"><span class="hs-identifier hs-var">unravelAnnotation</span></a></span><span> </span><span id="local-6989586621679519186"><span class="annot"><span class="annottext">Annotation
</span><a href="#local-6989586621679519186"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Pass Type
forall (m :: * -&gt; *) a. MonadError Error m =&gt; String -&gt; m a
</span><a href="Common.Compiler.html#todo"><span class="hs-identifier hs-var">Compiler.todo</span></a></span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><span class="annottext">(String -&gt; Pass Type) -&gt; String -&gt; Pass Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>  </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unravelAnnotation not yet able to handle non-trivial types: &quot;</span></span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Annotation -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Annotation
</span><a href="#local-6989586621679519186"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="annot"><a href="IR.Types.Typechecking.html#checkTypeDefs"><span class="hs-identifier hs-type">checkTypeDefs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Common.Identifiers.html#TConId"><span class="hs-identifier hs-type">TConId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="IR.IR.html#TypeDef"><span class="hs-identifier hs-type">TypeDef</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Common.Compiler.html#Pass"><span class="hs-identifier hs-type">Compiler.Pass</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span id="checkTypeDefs"><span class="annot"><span class="annottext">checkTypeDefs :: [(TConId, TypeDef)] -&gt; Pass ()
</span><a href="IR.Types.Typechecking.html#checkTypeDefs"><span class="hs-identifier hs-var hs-var">checkTypeDefs</span></a></span></span><span> </span><span class="annot"><span class="annottext">[(TConId, TypeDef)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; Pass ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-42"></span></pre></body></html>