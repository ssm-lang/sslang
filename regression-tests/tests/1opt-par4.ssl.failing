// once codegen supports return value of tuples,
// this test should pass

// check that optimize par pass does NOT rewrite par expressions 
// that have at least one non-instantaneous argument

type Pair2 a b
    Pair2 a b
    
add a b = a + b

main cin cout = 
    let x = 5 
        y = 60
    let r = par add x y // functions are not necessarily instantaneous
                add y x // functions are not necessarily instantaneous
    // ^should NOT rewrite r as a tuple
    match r 
        (0,0)   = ()
        (a1,a2) = after 1, cout <- a2
                  wait cout
                  after 1, cout <- 10
                  wait cout