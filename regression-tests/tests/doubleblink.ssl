toggle(led : &Int) =
  (led: &Int) <- 1 - (led: &Int)

slow(led : &Int) =
  let e1 = new ()
  loop
    toggle (led: &Int)
    after 30 ms , (e1: &()) <- ()
    wait (e1: &())

fast(led : Ref (Sched Int)) =
  let e2 = new ()
  loop
    toggle led
    after 20 ms , (e2: &()) <- ()
    wait (e2: &())

main(led : &Int) =
  par slow (led: &Int)
      fast (led: &Int)
